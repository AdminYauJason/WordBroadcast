import{h as e,j as a,c as l,w as s,i as o,o as t,a as c,e as u,k as n,l as r,m as i,p as d,f as m,q as p,I as f,g as _}from"./index-BFSQzsUc.js";import{s as v}from"./store.WVsknOEV.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=h({__name:"grid",setup(h){const g=e(""),b=e(""),I=e(!1),x=e("");v.hasLogin?console.log("用户已登录"):console.log("用户未登录");a(b,(e=>{let a=e.replace(/\D/g,"").slice(0,19);a!==e&&(b.value=a),I.value=19===a.length}));const y=async()=>{if(I.value)if(x.value||(x.value=v.hasLogin?v.userInfo.mobile:"0","0"!==x.value))try{const{success:e,message:a}=await V();e?(r({title:"提交成功",icon:"success",duration:2e3}),j(),i({url:"/pages/confirm/confirm"})):r({title:a||"提交失败",icon:"none"})}catch(e){r({title:e.message||"提交失败",icon:"none"}),console.error("提交失败:",e)}else r({title:"请先获取手机号",icon:"none"});else r({title:"请输入 19 位房间ID",icon:"none"})},V=async()=>await d.callFunction({name:"submitliverecord",data:{roomId:b.value,userPhone:x.value,productInfo:g.value}}),j=()=>{g.value="",b.value="",x.value=""};return(e,a)=>{const r=o,i=m,d=p,v=f,h=_;return t(),l(r,{class:"container"},{default:s((()=>[c(r,{class:"animated-background"},{default:s((()=>[c(r,{class:"circle circle-1"}),c(r,{class:"circle circle-2"}),c(r,{class:"circle circle-3"})])),_:1}),c(r,{class:"input_container"},{default:s((()=>[c(r,{class:"form-card"},{default:s((()=>[c(i,{class:"title"},{default:s((()=>[u("产品信息录入")])),_:1}),c(r,{class:"input-group"},{default:s((()=>[c(i,{class:"label"},{default:s((()=>[u("产品详细信息")])),_:1}),c(d,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),class:"textarea_box",placeholder:"请输入产品的详细信息...","placeholder-class":"placeholder-style",maxlength:-1,"auto-height":""},null,8,["modelValue"])])),_:1}),c(r,{class:"input-group"},{default:s((()=>[c(i,{class:"label"},{default:s((()=>[u("房间ID ")])),_:1}),c(v,{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e),class:"room_id_input",placeholder:"请输入19位数字房间ID","placeholder-class":"placeholder-style",type:"number",maxlength:"19"},null,8,["modelValue"])])),_:1}),c(h,{class:n(["confirm_button",{confirm_button_active:I.value}]),onClick:y,disabled:!I.value,"hover-class":"button-hover"},{default:s((()=>[c(i,null,{default:s((()=>[u("确定")])),_:1}),c(r,{class:"button-arrow"},{default:s((()=>[u("→")])),_:1})])),_:1},8,["class","disabled"])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-3a15604a"]]);export{g as default};
